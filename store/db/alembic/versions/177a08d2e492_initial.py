"""Initial

Revision ID: 177a08d2e492
Revises: 
Create Date: 2021-03-28 15:08:10.673750

"""
from alembic import op
import sqlalchemy as sa


# revision identifiers, used by Alembic.
revision = '177a08d2e492'
down_revision = None
branch_labels = None
depends_on = None

CourierType = sa.Enum('foot', 'bike', 'car', name='type')


def upgrade():
    # ### commands auto generated by Alembic - please adjust! ###
    op.create_table('couriers',
    sa.Column('courier_id', sa.Integer(), nullable=False),
    sa.Column('courier_type', CourierType, nullable=False),
    sa.PrimaryKeyConstraint('courier_id', name=op.f('pk__couriers'))
    )
    op.create_table('delivery_hours',
    sa.Column('delivery_hours_id', sa.Integer(), nullable=False),
    sa.Column('time_start', sa.Integer(), nullable=False),
    sa.Column('time_finish', sa.Integer(), nullable=False),
    sa.PrimaryKeyConstraint('delivery_hours_id', name=op.f('pk__delivery_hours'))
    )
    op.create_table('regions',
    sa.Column('region_id', sa.Integer(), nullable=False),
    sa.PrimaryKeyConstraint('region_id', name=op.f('pk__regions'))
    )
    op.create_table('working_hours',
    sa.Column('working_hours_id', sa.Integer(), nullable=False),
    sa.Column('time_start', sa.Integer(), nullable=False),
    sa.Column('time_finish', sa.Integer(), nullable=False),
    sa.PrimaryKeyConstraint('working_hours_id', name=op.f('pk__working_hours'))
    )
    op.create_table('couriers_regions',
    sa.Column('courier_id', sa.Integer(), nullable=False),
    sa.Column('region_id', sa.Integer(), nullable=False),
    sa.ForeignKeyConstraint(['region_id'], ['regions.region_id'], name=op.f('fk__couriers_regions__region_id__regions')),
    sa.PrimaryKeyConstraint('courier_id', 'region_id', name=op.f('pk__couriers_regions'))
    )
    op.create_table('couriers_working_hours',
    sa.Column('courier_id', sa.Integer(), nullable=False),
    sa.Column('working_hours_id', sa.Integer(), nullable=False),
    sa.ForeignKeyConstraint(['working_hours_id'], ['working_hours.working_hours_id'], name=op.f('fk__couriers_working_hours__working_hours_id__working_hours')),
    sa.PrimaryKeyConstraint('courier_id', 'working_hours_id', name=op.f('pk__couriers_working_hours'))
    )
    op.create_table('orders',
    sa.Column('order_id', sa.Integer(), nullable=False),
    sa.Column('courier_id', sa.Integer(), nullable=True),
    sa.Column('weight', sa.Float(), nullable=False),
    sa.Column('region', sa.Integer(), nullable=False),
    sa.Column('assignment_time', sa.DateTime(), nullable=True),
    sa.Column('completion_time', sa.DateTime(), nullable=True),
    sa.ForeignKeyConstraint(['courier_id'], ['couriers.courier_id'], name=op.f('fk__orders__courier_id__couriers')),
    sa.PrimaryKeyConstraint('order_id', name=op.f('pk__orders'))
    )
    op.create_table('orders_delivery_hours',
    sa.Column('order_id', sa.Integer(), nullable=False),
    sa.Column('delivery_hours_id', sa.Integer(), nullable=False),
    sa.ForeignKeyConstraint(['delivery_hours_id'], ['delivery_hours.delivery_hours_id'], name=op.f('fk__orders_delivery_hours__delivery_hours_id__delivery_hours')),
    sa.PrimaryKeyConstraint('order_id', 'delivery_hours_id', name=op.f('pk__orders_delivery_hours'))
    )
    # ### end Alembic commands ###


def downgrade():
    # ### commands auto generated by Alembic - please adjust! ###
    op.drop_table('orders_delivery_hours')
    op.drop_table('orders')
    op.drop_table('couriers_working_hours')
    op.drop_table('couriers_regions')
    op.drop_table('working_hours')
    op.drop_table('regions')
    op.drop_table('delivery_hours')
    op.drop_table('couriers')
    CourierType.drop(op.get_bind())
    # ### end Alembic commands ###
